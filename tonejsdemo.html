<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Tone.js Playground</title>
    <!-- See https://tonejs.github.io/ for library details. -->
    <style type="text/css">
      .buttonDown {
        background-color: lightslategray;
      }
      .buttonUp {
        background-color: white;
      }
    </style>
    <!-- Load Tone.js from cdnjs -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>
    <script type="text/javascript">
      // Define the synth engine
      function playNote(passedNoteValue) {
        const synth = new Tone.Synth().toDestination();
        var note = passedNoteValue; 
        synth.triggerAttackRelease(note, "32n");
      }

      // Set up keyboard event listeners
      document.addEventListener('keydown', (event)=> {    
          
          // reset the button colors
          const buttons = ['btnC4', 'btnD4', 'btnE4', 'btnF4', 'btnG4', 'btnA4', 'btnB4', 'btnC5'];
          buttons.forEach((buttonId) => {
            document.getElementById(buttonId).className = 'buttonUp';
          });

          // listen for keys, play notes, change button colors
          if (event.key == "a") {
            playNote("C4");
            document.getElementById("btnC4").className = 'buttonDown'; 
          } else if (event.key == "s") {
            playNote("D4");
            document.getElementById("btnD4").className = 'buttonDown';
          } else if (event.key == "d") {
            playNote("E4");
            document.getElementById("btnE4").className = 'buttonDown';
          } else if (event.key == "f") {
            playNote("F4");
            document.getElementById("btnF4").className = 'buttonDown';
          } else if (event.key == "g") {
            playNote("G4");
            document.getElementById("btnG4").className = 'buttonDown';
          } else if (event.key == "h") {
            playNote("A4"); 
            document.getElementById("btnA4").className = 'buttonDown';
          } else if (event.key == "j") {
            playNote("B4");
            document.getElementById("btnB4").className = 'buttonDown';
          } else if (event.key == "k") {
            playNote("C5");
            document.getElementById("btnC5").className = 'buttonDown';
          }

          console.log("keyed note: " + event.key);
      });

      // Play a random chord with n=i notes
      function randomChord() {
        var allNotes = Array ("C4", "D4", "E4", "F4", "G4", "A4", "B4", "C5"); 
        for (let i = 0; i < 4; i++) {
          var randomNote = allNotes[Math.floor(Math.random()*allNotes.length)];
          console.log("randomNote: " + randomNote);
          playNote(randomNote);
        }
      }

      // Play a random note
      function randomNote() {
        var allNotes = Array ("C4", "D4", "E4", "F4", "G4", "A4", "B4", "C5"); 
          var randomNote = allNotes[Math.floor(Math.random()*allNotes.length)];
          console.log("randomNote: " + randomNote);
          playNote(randomNote);
      }

      // Play a random melody of n=i notes with n=theTimeout pauses between 
      function randomMelody() {
        var theTimeout = 0; 
        for (let i = 0; i < 4; i++) {
          setTimeout(() => randomNote(), theTimeout); 
          theTimeout = theTimeout + 1000; 
        }
      }

    </script>
  </head>
  <body>
    <input id="btnC4" type="button" value="C4" onclick="playNote(this.value);" />
    <input id="btnD4" type="button" value="D4" onclick="playNote(this.value);" />
    <input id="btnE4" type="button" value="E4" onclick="playNote(this.value);" />
    <input id="btnF4" type="button" value="F4" onclick="playNote(this.value);" />
    <input id="btnG4" type="button" value="G4" onclick="playNote(this.value);" />
    <input id="btnA4" type="button" value="A4" onclick="playNote(this.value);" />
    <input id="btnB4" type="button" value="B4" onclick="playNote(this.value);" />
    <input id="btnC5" type="button" value="C5" onclick="playNote(this.value);" />
    <input id="randomMelody" type="button" value="randomChord" onclick="randomChord()" />
    <input id="randomMelody" type="button" value="randomMelody" onclick="randomMelody()" />
  </body>
</html>
